<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
<meta charset="utf-8">
<title>Insert title here</title>

<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">
<!--Import materialize.css-->
<link type="text/css" rel="stylesheet"
	href="/materialize/css/materialize.min.css" media="screen,projection" />

</head>
<body>

	<h1>Spring Boot + Thymeleaf + Material Design</h1>
	<h5>Cadastrar Pessoa</h5>

	<div class="row">
	
	<br>
		
		<div th:each="m : ${msg}">
			<span th:text="${m}"></span>
		</div>
		
	<br>
	
	
		<form action="salvarpessoa" method="post" th:object="${pessoaobj}"
			class="col s12" id="formPessoa">

			<div class="row">
				<div class="input-field col s6">
					<label for="id" class="active">Id</label> <input name="id" id="id"
						th:field="*{id}" type="text" readonly>
				</div>

				<div class="input-field col s6">
					<label for="nome" class="active">Nome</label> <input id="nome"
						name="nome" type="text" th:field="*{nome}">
				</div>

			</div>
			<div class="row">
				<div class="input-field col s6">
					<label for="sobrenome" class="active">Sobrenome</label> <input
						name="sobrenome" id="sobrenome" type="text"
						th:field="*{sobrenome}">
				</div>
				<div class="input-field col s6" sec:authorize="hasAnyRole('ROLE_ADMIN')">
					<label class="active" for="idade">Idade</label> 
					<input name="idade"
						id="idade" type="number" th:field="*{idade}">
				</div>
			</div>

			<div class="row">
				<div class="input-field col s12">

					<button class="btn waves-effect waves-light" type="submit" name="action">
						Gravar
					</button>
					
					<button class="btn waves-effect waves-light" type="button" onclick="document.getElementById('formPessoa').reset();">
						Novo
					</button>

				</div>
			</div>

		</form>
	</div>

	<br>
	<br>
	<br>
	<form method="post" action="pesquisarpessoa">
		<label>Pesquisa por nome</label> <input type="text"
			name="nomepesquisa">
		<button class="btn waves-effect waves-light" type="submit"
			name="action">
			Pesquisar <i class="material-icons right"></i>
		</button>
	</form>
	<br>
	<br>

	<table class="striped">
		<tr>
			<th>Id</th>
			<th>Nome</th>
			<th>Sobrenome</th>
			<th>Idade</th>
			<th>#</th>
			<th>#</th>
		</tr>
		<tr th:each="pessoa : ${pessoas}">
			<td th:text=${pessoa.id}></td>
			<td><a th:href="@{/telefones/{idpessoa}(idpessoa=${pessoa.id})}"><span th:text=${pessoa.nome}></span></a></td>
			<td th:text=${pessoa.sobrenome}></td>
			<td th:text=${pessoa.idade}></td>
			<td><a
				th:href="@{/editarpessoa/{idpessoa}(idpessoa=${pessoa.id})}">
					Editar </a></td>
			<td><a
				th:href="@{/excluirpessoa/{idpessoa}(idpessoa=${pessoa.id})}">
					Excluir </a></td>
		</tr>
	</table>



	<!--JavaScript at end of body for optimized loading-->
	<script type="text/javascript" src="/materialize/js/materialize.min.js"></script>

</body>
</html>